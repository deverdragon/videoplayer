/*!
 * videoPlayer v1.0.1 ~ Copyright (c) 2018 Xzavier, https://github.com/xiaohuazheng/videoplayer
 * Released under MIT license
 */
!function(e,n,i,t){var a=navigator.userAgent,o="ontouchstart"in n,d=o?"touchstart":"mousedown",l=o?"touchmove":"mousemove",r=o?"touchend":"mouseup",s=o?"touchcancel":"mouseup";function u(e){var n=Math.floor(e/60),i=Math.floor(e-60*n);return(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)}function c(e){if(!e)return!1;var n=i.createElement("video");if("function"!=typeof n.canPlayType)return!1;var t=n.canPlayType("video/"+e.split(".").pop().toLowerCase());return"probably"===t||"maybe"===t}function p(){i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitCancelFullScreen&&i.webkitCancelFullScreen()}e.fn.initVideoPlayer=function(){return this.each(function(){if("video"===e(this).prop("tagName").toLowerCase()){var n=e(this),t=n.attr("src"),v=!1;if(c(t)?v=!0:n.find("source").each(function(){if(c(e(this).attr("src")))return v=!0,!1}),v){var h=e('<div class="ppq-video-player"><div class="screen-box">'+e("<div>").append(n.eq(0).clone()).html()+"</div></div>"),f=h.find("video")[0];h.find(".screen-box").append('<span class="player-loading"></span>                <div class="play-btn" style="display: none;">                    <button>                        <span>                            <svg xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 36 36"><path d="M11,10 L18,13.74 18,22.28 11,26 Z M18,13.74 L26,18 26,18 18,22.28 Z"></path></svg>                        </span>                    </button>                </div>'),h.append('<div class="tool-box tool-box-hide">                <div class="play-pause-btn paused"></div>                <div class="player-time-current">00:00</div>                <div class="player-time-duration">00:00</div>                <div class="player-enlarge-btn"></div>                <div class="player-bar">                    <div class="player-bar-loaded">                        <span class="player-bar-dot"></span>                    </div>                </div>            </div>');var m=null,y=h.find(".ppq-video"),b=h.find(".play-pause-btn"),w=h.find(".play-btn"),C=h.find(".player-loading"),x=h.find(".tool-box"),g=h.find(".player-time-current"),F=h.find(".player-time-duration"),k=h.find(".player-bar-loaded"),E=h.find(".player-bar"),L=h.find(".player-enlarge-btn");h.find(".player-bar-dot");F.html("&hellip;"),f.addEventListener("playing",function(){y.show(),b.removeClass("paused").addClass("playing"),w.hide(),C.hide(),e.isNumeric(f.duration)&&F.text(u(f.duration)),S()}),f.addEventListener("ended",function(){p(),y.hide(),b.removeClass("playing").addClass("paused"),w.show(),C.hide()}),f.addEventListener("pause",function(){y.show(),w.show(),C.hide()}),f.addEventListener("loadeddata",function(){e.isNumeric(f.duration)&&F.text(u(f.duration))}),f.addEventListener("durationchange",function(){e.isNumeric(f.duration)&&F.text(u(f.duration))}),f.addEventListener("timeupdate",function(){g.text(u(f.currentTime));var e=f.currentTime/f.duration*100;e=e>100?100:e<0?0:e,k.width(e+"%")}),f.addEventListener("webkitendfullscreen",function(){!0===f.paused&&(y.hide(),w.show(),b.removeClass("playing").addClass("paused"))}),setTimeout(function(){y.removeClass("video-hidden"),C.hide(),w.show()},1e3),h.on("click",function(e){S(e)}),w.on("click",function(){f.play(),y.show(),w.hide(),C.hide()}),b.on("click",function(e){b.hasClass("playing")?(f.pause(),b.removeClass("playing").addClass("paused")):(f.play(),b.removeClass("paused").addClass("playing"))}),L.on("click",function(){i.webkitIsFullScreen?p():a.match(/android/i)&&a.indexOf("Chrome")>-1?screenfull.request(h[0]):f.requestFullscreen?f.requestFullscreen():f.webkitEnterFullScreen?f.webkitEnterFullScreen():f.mozRequestFullScreen?f.mozRequestFullScreen():f.webkitRequestFullScreen&&f.webkitRequestFullScreen()}),E.on(d,function(e){var n=0,i=function(e){var i=o?event.changedTouches[0]:e,t=(i.clientX-E.offset().left)/E.width();n=(n=100*t)>100?100:n<0?0:n,k.width(n+"%"),f.currentTime=t*f.duration};i(e),E.on(l,function(e){w.hide(),C.show(),i(e)}),E.on(r,function(e){C.hide(),n<100&&f.play()})}).on(s,function(){E.unbind(l)}),n.replaceWith(h),"h5"===y.attr("x5-video-player-type")&&a.match(/android/i)&&a.indexOf("MQQBrowser")>-1&&L.hide()}}function S(e){e&&e.target&&"VIDEO"===e.target.nodeName&&!x.hasClass("tool-box-hide")?x.addClass("tool-box-hide"):x.removeClass("tool-box-hide"),clearTimeout(m),m=setTimeout(function(){x.addClass("tool-box-hide")},2e3)}}),this}}(jQuery,window,document);